# AI RPG Engine

A local, AI-powered roleplaying game engine built with Streamlit.  
The application uses large language models as a Dungeon Master while the system enforces game mechanics such as experience, inventory, companions, and journaling through structured tag parsing.

This project is intended as a **playable experiment** and a **reference implementation** for combining LLMs with deterministic game state management.

---

## Features

- Chat-driven tabletop-style RPG gameplay
- AI Dungeon Master powered by LLMs
- Local-first execution (no mandatory cloud services)
- Support for Ollama and OpenRouter
- Character classes, skills, XP, and leveling
- Inventory, companions, and journal tracking
- Save and load game state
- Streamlit-based UI with sidebar controls and modal character creation

---

## Requirements

- Python **3.10 or newer**
- One of the following AI backends:
  - **Ollama** (local models)
  - **OpenRouter** (API-based models)

---

## Installation

### 1. Clone the repository

```bash
git clone https://github.com/Zietean/ai-rpg-engine.git
cd ai-rpg-engine
```

### 2. (Recommended) Create a virtual environment

```bash
python -m venv .venv
source .venv/bin/activate        # macOS / Linux
.venv\Scripts\activate           # Windows
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

---

## Running the Application

Start the Streamlit app:

```bash
streamlit run app.py
```

A browser window will open automatically.

---

## AI Backend Configuration

### Option 1: Ollama (Local Models)

1. Install Ollama: https://ollama.com
2. Start the Ollama service
3. In the application sidebar:
   - Select **Source: ollama**
   - Set the Ollama URL (default: `http://127.0.0.1:11434`)
   - Click **Refresh Models**
   - Select an available model

### Option 2: OpenRouter

1. Create an account at https://openrouter.ai
2. Generate an API key
3. In the application sidebar:
   - Select **Source: openrouter**
   - Enter your API key
   - Click **Refresh Models**
   - Select a model

---

## Gameplay Overview

1. Click **New Game**
2. Choose:
   - Character name
   - Class (Mage, Warrior, Rogue)
   - World / setting description
3. The AI Dungeon Master narrates the opening scene
4. Interact through the chat input

The AI responds with narrative text and structured tags.  
These tags are parsed to update the game state deterministically.

---

## Supported AI Tags

The engine recognizes the following tags in AI output:

- `[XP: n]` â€“ award experience points
- `[ADD ITEM: item name]`
- `[REMOVE ITEM: item name]`
- `[ADD COMPANION: name]`
- `[UPDATE JOURNAL: text]`

Tags are intended to be generated by the AI, not typed manually by the player.

---

## Save and Load

- Game state is saved locally to `rpg_save.json`
- Use the **Save** and **Load** buttons in the sidebar
- No external database is required

---

## Project Structure

```
app.py              Streamlit application
requirements.txt    Python dependencies
README.md           Documentation
```

---

## Design Notes

- The AI acts only as a narrator and proposer of events
- All state changes are enforced by the application
- Player identity is strictly controlled to prevent AI role confusion
- The project favors clarity and inspectability over abstraction

---

## Limitations

- Designed for local use, not multi-user play
- No combat simulation beyond narrative and tags
- Not intended as a finished commercial game

---

## License

MIT License
